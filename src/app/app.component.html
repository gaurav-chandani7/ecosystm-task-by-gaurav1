<p-menubar [model]="items" #headerBar>
    <ng-template pTemplate="end">
        <img src="assets/logo-temp.png" height="40" class="p-mr-2">
    </ng-template>
</p-menubar>
<div class="table-wrapper">
    <p-dataView #dv [value]="jobs" [paginator]="true" [rows]="10"
        [sortField]="sortField" [sortOrder]="1" layout="list" (onPage)="scrollToTop()">
        <ng-template pTemplate="header">
            <div class="container">
                <div class="row">List of Jobs</div>
                <div class="row d-flex" style="justify-content: space-between;">
                    <input type="search" pInputText placeholder="Search by Skills, Title"
                        (input)="dv.filter($event.target.value)">
                    <p-button label="Advanced Search" (click)="isAdvanceFilterMode = !isAdvanceFilterMode"></p-button>
                </div>
            </div>
            <div *ngIf="isAdvanceFilterMode">
                
                <div class="row d-flex" style="justify-content: space-evenly;">
                    <p-button label="Filter by Location" (click)="op.toggle($event)" [badge]="selectedLocation!=undefined ? 1:0" styleClass="p-mr-2"></p-button>
                    <p-button label="Filter by Salary" styleClass="p-mr-2"></p-button>
                    <p-button label="Filter by Experience" styleClass="p-mr-2"></p-button>
                    <p-overlayPanel #op>
                        <ng-template pTemplate>
                            <p-table [value]="cities" selectionMode="single" [(selection)]="selectedLocation" (onRowSelect)="applyFilter('loc')" (onRowUnselect)="removeFilter('loc')">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-city>
                                    <tr [pSelectableRow]="rowData">
                                        <td>{{city.name}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </ng-template>
                    </p-overlayPanel>
                </div>
            </div>
        </ng-template>
        <ng-template let-job pTemplate="listItem">
            <div class="job-list container">
                <div class="row">
                <div class="col-md-9">
                    <div class="job-title row"><i class="pi pi-star"></i><span>{{job.title}}</span></div>
                    <div class="job-description row">
                        <p-inplace [closable]="true">
                            <ng-template pTemplate="display">
                                <div [innerHtml]="getShortContent(job.jobDescription)" style="max-height: 25vh;"></div>
                                <a (click)="activatedFullContent(job.jobId, $event)" style="color: lightblue;">Read More</a>
                            </ng-template>
                            <ng-template pTemplate="content">
                                <div class="col-md-12" [innerHTML]="job.jobDescription"></div>
                            </ng-template>
                        </p-inplace>
                    </div>
                    <div class="job-location row"><div class="col-md-12"><i class="pi pi-map-marker"></i>{{job.placeholders[2].label}}</div></div>
                    <div class="work-exp-and-skills row">
                        <div class="job-skills col-md-6 d-flex">
                        <div [innerHTML]="getProcessedString(job.tagsAndSkills)"></div>
                        </div>
                        <div class="job-work-experience col-md-2 d-flex">
                            <p-knob [ngModel]="getKnobValue(job.placeholders[0].label)" [readonly]="true" [showValue]="false" [min]="10" [max]="100" [size]="50"></p-knob>
                            {{job.placeholders[0].label}}
                        </div>
                        <div class="job-posted-time-update col-md-3 d-flex" [ngStyle]="getStyleObject(job.footerPlaceholderColor)">
                            <i class="pi pi-clock"></i>{{job.footerPlaceholderLabel}}
                        </div>
                    </div>
                </div>
                <div class="job-list-right-section col-md-3 d-flex">
                    <div class="company-logo" style="height: 100px;">
                        <img [src]="job.logoPath!=undefined ? job.logoPath : 'assets/logo-temp.png'" [alt]="job.companyName" />
                    </div>
                    <span>{{job.companyName}}</span>
                    <div class="row">
                    <p-button icon="pi pi-chevron-right" label="Apply" iconPos="right" class="row"></p-button>
                    </div>
                </div>
            </div>
            </div>
        </ng-template>
    </p-dataView>
</div>